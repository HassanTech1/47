<footer class="footer" id="shopify-section-{{ section.id }}">
  <div class="footer__content-top page-width">
    <div class="footer__columns">
      <!-- Newsletter -->
      {%- if section.settings.newsletter_enable -%}
        <div class="footer__col footer__col--newsletter">
          <h3 class="footer__heading">{{ 'sections.footer.newsletter_heading' | t }}</h3>
          <p class="footer__newsletter-desc">{{ 'sections.footer.newsletter_description' | t }}</p>
          {%- form 'customer', id: 'ContactFooter', class: 'footer__newsletter-form' -%}
            <input type="hidden" name="contact[tags]" value="newsletter">
            <div class="field">
              <input
                id="NewsletterForm--{{ section.id }}"
                type="email"
                name="contact[email]"
                class="field__input"
                value="{{ form.email }}"
                aria-required="true"
                autocorrect="off"
                autocapitalize="off"
                autocomplete="email"
                {% if form.errors %}
                  autofocus
                  aria-invalid="true"
                  aria-describedby="ContactFooter-error"
                {% elsif form.posted_successfully? %}
                  aria-describedby="ContactFooter-success"
                {% endif %}
                placeholder="{{ 'sections.footer.email_placeholder' | t }}"
                required
              >
              <button
                type="submit"
                class="newsletter-form__button"
                aria-label="{{ 'newsletter.button_label' | t }}"
              >
                {{ 'sections.footer.subscribe_btn' | t }}
              </button>
            </div>
            {%- if form.errors -%}
              <small id="ContactFooter-error">{{ form.errors.translated_fields['email'] | capitalize }} {{ form.errors.messages['email'] }}</small>
            {%- endif -%}
            {%- if form.posted_successfully? -%}
              <h3 id="ContactFooter-success" tabindex="-1" autofocus>{{ 'newsletter.success' | t }}</h3>
            {%- endif -%}
          {%- endform -%}

          <!-- Social Icons -->
          {%- if section.settings.show_social and shop.instagram != blank -%}
            <div class="footer__social-icons">
              {%- if shop.instagram != blank -%}
                <a href="https://instagram.com/{{ shop.instagram }}" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
                  <svg class="icon icon-instagram" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg>
                </a>
              {%- endif -%}
            </div>
          {%- endif -%}
        </div>
      {%- endif -%}

      <!-- Link lists from blocks -->
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'link_list' -%}
            <div class="footer__col" {{ block.shopify_attributes }}>
              {%- if block.settings.heading != blank -%}
                <h3 class="footer__heading">{{ block.settings.heading }}</h3>
              {%- endif -%}
              {%- if block.settings.menu != blank -%}
                <ul class="footer__menu list-unstyled" role="list">
                  {%- for link in linklists[block.settings.menu].links -%}
                    <li><a href="{{ link.url }}" class="footer__link link">{{ link.title }}</a></li>
                  {%- endfor -%}
                </ul>
              {%- endif -%}
            </div>
        {%- endcase -%}
      {%- endfor -%}
    </div>
  </div>

  <div class="footer__content-bottom page-width">
    <div class="footer__bottom-row">
      <!-- Currency / Locale selectors -->
      {%- if section.settings.enable_country_selector and localization.available_countries.size > 1 -%}
        <div class="footer__localization">
          {%- form 'localization', id: 'FooterCountryForm', class: 'localization-form' -%}
            <select name="country_code" class="footer-select" onchange="this.form.submit()">
              {%- for country in localization.available_countries -%}
                <option value="{{ country.iso_code }}"{% if country.iso_code == localization.country.iso_code %} selected{% endif %}>
                  {{ country.name }} ({{ country.currency.iso_code }} {{ country.currency.symbol }})
                </option>
              {%- endfor -%}
            </select>
          {%- endform -%}
        </div>
      {%- endif -%}

      <!-- Copyright -->
      <p class="footer__copyright">
        &copy; {{ 'now' | date: '%Y' }}, {{ shop.name }}
        {%- if section.settings.payment_enable -%}
          {{ powered_by_link }}
        {%- endif -%}
      </p>
    </div>
  </div>
</footer>

{% schema %}
{
  "name": "t:sections.footer.name",
  "class": "section-footer",
  "settings": [
    {
      "type": "checkbox",
      "id": "newsletter_enable",
      "default": true,
      "label": "t:sections.footer.settings.newsletter_enable.label"
    },
    {
      "type": "text",
      "id": "newsletter_placeholder",
      "default": "Your email address",
      "label": "Newsletter placeholder"
    },
    {
      "type": "checkbox",
      "id": "show_social",
      "default": true,
      "label": "Show social icons"
    },
    {
      "type": "checkbox",
      "id": "enable_country_selector",
      "default": false,
      "label": "t:sections.footer.settings.enable_country_selector.label"
    },
    {
      "type": "checkbox",
      "id": "payment_enable",
      "default": false,
      "label": "t:sections.footer.settings.payment_enable.label"
    }
  ],
  "blocks": [
    {
      "type": "link_list",
      "name": "t:sections.footer.blocks.link_list.name",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "default": "Quick links",
          "label": "t:sections.footer.blocks.link_list.settings.heading.label"
        },
        {
          "type": "link_list",
          "id": "menu",
          "default": "footer",
          "label": "t:sections.footer.blocks.link_list.settings.menu.label"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.footer.presets.name"
    }
  ]
}
{% endschema %}
